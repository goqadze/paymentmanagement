<link rel="import" href="../../custom-html-element.html">

<template id='chart-column-template'>
    <style>
        :host {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 7%;
            background: red;
            display: flex;
            align-items: flex-end; 
        }

        #content {
            background: tomato;
            margin: 0 auto;

            color: white;
            overflow:hidden;

            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:flex-end;
            height:80px;
            width: 42px;
        }
        
        #content:hover {
            background: green;
            height: 100% !important;
        }

        p {
            margin:0;
            font-size: 13px;
        }

        #column {
            min-height:50px;
            width:100%;
            background: yellow;
        }
    </style>

    <div id="content">
        <p id="amount">95.50</p>
        <div id="column"> </div>
        <p id="month">Jan</p>
    </div>

</template>
<script>
(function () {
    class ChartColumn extends CustomHTMLElement {
        constructor() {
            super();
        }

        connectedCallback() {
            super.connectedCallback();
            console.log('chart-column connected to page');
        }

        set height(value) {
            const column = this.shadowRoot.querySelector('#column');
            column.setAttribute('style',`min-height: ${value}px`);

            const content = this.shadowRoot.querySelector('#content');
            const monthEl = this.shadowRoot.querySelector('#month');
            content.setAttribute('style',`height: ${+value + monthEl.offsetHeight}px`);
        }

        set amount(value) {
            const amount = this.shadowRoot.querySelector('#amount');
            amount.innerHTML = value;
        }

        set month(value) {
            const month = this.shadowRoot.querySelector('#month');
            month.innerHTML = value;
        }
    }

    let thisImportDoc = document.currentScript.ownerDocument;
    ChartColumn.templateId = 'chart-column-template';
    ChartColumn.importDoc = thisImportDoc;
    ShadyCSS.prepareTemplate(ChartColumn.template, 'chart-column');
    customElements.define('chart-column', ChartColumn);
})();
</script>
